<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Les fichiers générés &mdash; openMairie - Guide du développeur v0.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="top" title="openMairie - Guide du développeur v0.0 documentation" href="../index.html" />
    <link rel="up" title="Générateur" href="index.html" />
    <link rel="next" title="Paramétrage générateur" href="parametrage_generateur.html" />
    <link rel="prev" title="L’analyse de la base" href="analyse_base.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="parametrage_generateur.html" title="Paramétrage générateur"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="analyse_base.html" title="L’analyse de la base"
             accesskey="P">précédent</a> |</li>
        <li><a href="../index.html">openMairie - Guide du développeur v0.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Générateur</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="les-fichiers-g-n-r-s">
<span id="fichier-genere"></span><h1>Les fichiers générés<a class="headerlink" href="#les-fichiers-g-n-r-s" title="Lien permanent vers ce titre">¶</a></h1>
<p>Les fichiers générés concernent :</p>
<ul class="simple">
<li>les formulaires</li>
<li>les requêtes mémorisées</li>
<li>le script d&#8217;import de données</li>
</ul>
<div class="section" id="les-formulaires">
<h2>Les formulaires<a class="headerlink" href="#les-formulaires" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les formulaires sont génèrés suivant le nom de la table dans le répertoire sql, sous repertoire portant le nom de la base pour régler le problème de compatibilité SQL (concaténation, extraction ...)</p>
<p>Deux types de formulaire sont générés : type table, type form.</p>
<div class="section" id="param-tres-de-type-table">
<h3>Paramétres de type table :<a class="headerlink" href="#param-tres-de-type-table" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li>gen/sql/base/nom_table.inc</li>
<li>sql/base/nom_table.inc</li>
</ul>
<p>Par défaut :</p>
<ul class="simple">
<li>tri en affichage vide</li>
<li>champ de recherche avec les champs string</li>
<li>pas d&#8217;affichage de champ blog</li>
<li>rattachement de sous formulaire</li>
<li>affichage de l&#8217;édition de la table</li>
</ul>
<p>Dans le fichier paramètres : form.inc</p>
<p>$serie = nombre d&#8217;enregistrement par page</p>
<p>$ico = icône par defaut</p>
</div>
<div class="section" id="param-tres-de-type-form">
<h3>Paramétres de type Form :<a class="headerlink" href="#param-tres-de-type-form" title="Lien permanent vers ce titre">¶</a></h3>
<p>gen/sql/base/nom_table.form.inc</p>
<p>sql/base/nom_table.form.inc</p>
<p>Dans le fichier paramètres : form.inc</p>
<p>$ico = icône par defaut</p>
<p>Par défaut :
- tous les champs sont affichés les uns en dessous des autres</p>
</div>
</div>
<div class="section" id="les-objets-m-tier">
<h2>Les Objets «&nbsp;métier&nbsp;»<a class="headerlink" href="#les-objets-m-tier" title="Lien permanent vers ce titre">¶</a></h2>
<p>L&#8217;objet métier généré est stocké en gen/obj/nom_table.class.php. Ce script ne doit pas être modifié car il est reconstitué à chaque génération :</p>
<p>Cela permet de pouvoir modifier la base de données (ajout, modification ou suppression de champs) et de regénérer tout ou partie de l&#8217;application</p>
<p>Un second script héritant de l&#8217;objet généré permet de surcharger les méthodes et de personnalisé l&#8217;objet métier.</p>
<p>Toutes les modifications doivent être faites dans ce script soit en héritant de la méthode,
soit en surchargeant la méthode.</p>
<p>L&#8217;objet à personnaliser est stocké en obj/nom_table.class.php</p>
<p>Les méthodes  générés dans l&#8217;objet métier gen/obj/nom_table.class.php sont par défaut les suivantes.</p>
<p>Le type de champs est :</p>
<blockquote>
<p>. caché (hidden) en ajout pour la clé primaire automatique,</p>
<p>. modifiable en ajout si la clé primaire n&#8217;est pas automatique</p>
<p>. la clé primaire est visible sans possibilité de modifier en modification</p>
<p>. la clé secondaire n&#8217;est pas modifiable en sous formulaire si c&#8217;est la clé primaire du formulaire</p>
<p>. la clé secondaire est un champ select qui reprend les informations de la table liée</p>
<p>. la date est au format français</p>
</blockquote>
<p>La longueur d&#8217;affichage et le maximum autorisé à la saisie est celle contenu dans la base d&#8217;origine (retraitée pour les champs string de pgsql)</p>
<p>Le contrôle des clés secondaires des autres tables est généré : il n&#8217;est pas possible de supprimer un enregistrement si des enregistrements sont liés à la clé primaire</p>
<p>Les libellés sont les noms des champs.</p>
<p>Ce module sert pour le formulaire et le(s) sous formulaire(s).</p>
<p>Les méthodes qui peuvent être implémentés dans obj/nom_table.class.php sont les suivantes</p>
<blockquote>
<ul class="simple">
<li>verifier</li>
<li>regroupe et groupe pour modifier les présentations</li>
<li>trigger avant ou après l&#8217;enregistrement:</li>
<li>triggerajouter</li>
<li>triggermodifier</li>
<li>triggersupprimer</li>
<li>triggerajouterapres</li>
<li>triggermodifierapres</li>
<li>triggersupprimerapres</li>
</ul>
</blockquote>
<p>Les méthodes de l&#8217;objet généré en gen/obj  peuvent être surchargées totalement ou partiellement :</p>
<p>Exemple :</p>
<blockquote>
<p>om_profil.class.php :</p>
<blockquote>
<p>surcharge des méthodes</p>
<blockquote>
<p>setValFAjout setId,</p>
<p>verifierAjout</p>
<p>et setType car la clé primaire est numérique et non automatique</p>
</blockquote>
</blockquote>
<p>om_utilisateur.class.php :</p>
<blockquote>
champ pwd pour mot de passe  methode partiellement surchargées (parent::setvalF($val);) setvalF, setType, setValsousformulare, surcharge avec un javascript de mise en majuscule du nom</blockquote>
</blockquote>
<p>Enfin, il est possible de mettre en place d&#8217;autres type de champs disponible dans openMairie</p>
<ul>
<li><p class="first">ComboG  combo gauche</p>
<blockquote>
<ul class="simple">
<li>comboD combo droit</li>
<li>Localisation (geolocalisation en x, y)</li>
<li>http (lien)</li>
<li>httpclick (lien)</li>
<li>Password (Mot de passe)</li>
<li>Pagehtml (Textearea pour affichage html)</li>
<li>Textdisabled (Text non modifiable)</li>
<li>Selectdisabled (Select non modifiable)</li>
<li>Textreadonly (Text non modifiable)</li>
<li>Hidden (champ caché)</li>
<li>Checkbox (case a cocher oui/non)</li>
<li>Upload (chargement d&#8217;un fichier)</li>
<li>voir (voir un fichier téléchargé)</li>
<li>Rvb (choisir une couleur rvn avec la Palette de couleur)</li>
</ul>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="les-tats">
<h2>Les états<a class="headerlink" href="#les-tats" title="Lien permanent vers ce titre">¶</a></h2>
<p>Seul l&#8217;état «&nbsp;pdf&nbsp;» est généré par le générateur</p>
<p>Dans le menu gen (generateur), les états sont générés automatiquement avec un assistant.</p>
<p>Cet assistant vous permet de construire un état :</p>
<ul class="simple">
<li>en choisissant une table de la base</li>
<li>en choisissant les champs à mettre dans l&#8217;état</li>
</ul>
<p>L&#8217;etat est enregistré dans la table om_etat et peut être modifié
menu-&gt;administration -&gt; etat</p>
<p>De la même manière, il est possible de créer un sous etat.</p>
<p>Il est possible de choisir le champ qui sera la clé secondaire en lien avec la table mère</p>
<p>Le sousetat est enregistré dans la table om_sousetat et peut être modifié</p>
<p>menu-&gt;administration -&gt; sousetat</p>
<p>Le calcul de la largeur des colonnes est automatique dans les sous états et l&#8217;état pdf.</p>
<p>Attention :  les champs «&nbsp;blob&nbsp;» ne sont pas pris en compte dans les éditions.</p>
</div>
<div class="section" id="les-requ-tes-m-moris-es">
<h2>les requêtes mémorisées<a class="headerlink" href="#les-requ-tes-m-moris-es" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les requêtes paramétrées sont crées suivant le principe suivant :</p>
<blockquote>
<ul class="simple">
<li>une requête globale</li>
<li>une requête avec un champ select pour chaque clé secondaire (il est possible de sélectionner la requête à générer</li>
<li>Les autres champs sont sélectionnés à l&#8217;affichage</li>
</ul>
</blockquote>
<p>Les requêtes sont accessibles dans l&#8217;option du menu -&gt; export.</p>
</div>
<div class="section" id="les-imports">
<h2>les imports<a class="headerlink" href="#les-imports" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un script d&#8217;import des données est généré suivant le principe suivant :</p>
<blockquote>
<ul class="simple">
<li>si la clé est automatique, génération du compteur</li>
<li>tous les champs sont importés</li>
<li>vérification de l&#8217;existence de la clé secondaire à chaque enregistrement</li>
</ul>
</blockquote>
<p>Les tables avec clés secondaires doivent donc être importées en dernier.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table des matières</a></h3>
            <ul>
<li><a class="reference external" href="">Les fichiers générés</a><ul>
<li><a class="reference external" href="#les-formulaires">Les formulaires</a><ul>
<li><a class="reference external" href="#param-tres-de-type-table">Paramétres de type table :</a></li>
<li><a class="reference external" href="#param-tres-de-type-form">Paramétres de type Form :</a></li>
</ul>
</li>
<li><a class="reference external" href="#les-objets-m-tier">Les Objets «&nbsp;métier&nbsp;»</a></li>
<li><a class="reference external" href="#les-tats">Les états</a></li>
<li><a class="reference external" href="#les-requ-tes-m-moris-es">les requêtes mémorisées</a></li>
<li><a class="reference external" href="#les-imports">les imports</a></li>
</ul>
</li>
</ul>

            <h4>Sujet précédent</h4>
            <p class="topless"><a href="analyse_base.html"
                                  title="Chapitre précédent">L&#8217;analyse de la base</a></p>
            <h4>Sujet suivant</h4>
            <p class="topless"><a href="parametrage_generateur.html"
                                  title="Chapitre suivant">Paramétrage générateur</a></p>
            <h3>Cette page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/generateur/fichier_genere.txt"
                     rel="nofollow">Montrer la source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Recherche rapide</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="parametrage_generateur.html" title="Paramétrage générateur"
             >suivant</a> |</li>
        <li class="right" >
          <a href="analyse_base.html" title="L’analyse de la base"
             >précédent</a> |</li>
        <li><a href="../index.html">openMairie - Guide du développeur v0.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Générateur</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2010, openMairie.
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>